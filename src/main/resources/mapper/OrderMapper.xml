<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.sidaodemo.mapper.OrderMapper">

    <select id="list" resultType="com.example.sidaodemo.entity.Order">
        select
            id,
            created_at,
            updated_at,
            deleted_at,
            user_id,
            product_name,
            total_price,
            `count`,
            unit_price,
            status,
            pay_type
        from
            p_order
        limit #{page},#{pers}
    </select>
    <select id="count" resultType="java.lang.Integer">
        select
            count(id)
        from
            p_order
    </select>
    <select id="lastUserOrder" resultType="com.example.sidaodemo.entity.Order">
        select
               *
        from
             (select * from p_order ORDER BY created_at DESC limit #{count})
                 o
        GROUP BY o.user_id
    </select>
</mapper>